import folium
from folium.plugins import HeatMap

# Vos données
data = [
    [36.86461188050044, 10.217478287058501, 1976.3682861328125],
    [36.85932073032182, 10.190136329449802, 5120.5224609375],
    [36.84693253206098, 10.19142180000206, 1976.3685302734375],
    [36.83226772164917, 10.210523647852378, 0],
    [36.847172226146355, 10.191806488345284, 1976.3685302734375],
    [36.82964497121142, 10.179434588345284, 2005.1417236328125],
    [36.847038861467276, 10.191116434972384, 1976.3682861328125],
    [36.84242826837058, 10.166099919016244, 4450.72021484375],
    [36.81714043624128, 10.184233641106577, 1976.3681640625],
    [36.81525529968038, 10.178412729449802, 8078.29833984375],
    [36.83806048336942, 10.156815424538825, 5814.4033203125],
    [36.81328966310319, 10.180346088345285, 8078.29833984375],
    [36.7996269512662, 10.18289317668851, 8911.1357421875],
    [36.80274422147794, 10.18305601349366, 8078.2978515625],
    [36.80134741383669, 10.178146315346597, 8078.2978515625],
    [36.8085703268267, 10.184597429449802, 0],
    [36.87534250833312, 10.180164987103957, 5120.5224609375],
    [36.79892380633758, 10.175587226391762, 8911.1357421875],
    [36.805022190352545, 10.168516541106579, 11715.14843751],
    [36.84637454196032, 10.190503017793025, 1976.3682861328125],
    [36.84657202678895, 10.218093626391763, 1976.3682861328125],
    [36.83380582381766, 10.117239288345285, 17643.904296875],
    [36.79354049999999, 10.186194641700071, 8093.3125],
    [36.80497259140966, 10.123335594479476, 14364.2890625],
    [36.856463284578304, 10.20695083006141, 2301.220458984375],
    [36.78382775204915, 10.109423211658838, 1053.1395263671875],
    [36.75615604740064, 10.222702662567192, 5994.01611328125],
    [36.797399656880565, 10.169814772982637, 10994.1708984375],
    [36.80289707647919, 10.169652571165928, 11715.1484375],
    [36.77054477991233, 10.230706558897545, 3442.488037109375],
    [36.849164292698916, 10.260433877300121, 1992.3297119140625],
    [36.85889665734319, 10.162309600002063, 5120.52197265625],
    [36.85606390002881, 10.207418880987877, 2301.220458984375],
    [36.73319061722877, 10.207800924538828, 4161.55810546875],
    [36.698357290523674, 10.170097417793027, 1167.4312744140625],
    [36.807574274462155, 10.184155900002061, 8078.29833984375],
    [36.84636903214005, 10.269699088345282, 1992.3297119140625],
    [36.84694944186751, 10.191447082211099, 1976.3685302734375],
    [36.842051015932896, 10.201113647240772, 1976.3681640625],
    [36.82728340830032, 9.843717447240769, 137.00460815429688],
    [36.767386294572795, 10.269680758897545, 2084.492919921875],
    [36.74335532124034, 10.296850229449802, 4805.455078125],
    [36.88430694510933, 10.33184454724077, 2587.099365234375],
    [36.731511448240255, 10.336152647240768, 4126.7021484375],
    [35.8026761137141, 10.604886924794501, 3138.246826171875],
    [35.82663632070178, 10.637750988956892, 4533.38134765625],
    [35.831152747536514, 10.640418558897544, 4533.38134765625],
    [35.83395740149852, 10.635315394479477, 4533.380859375],
    [35.85922600161997, 10.597144774242079, 1960.004638671875],
    [35.83200481647174, 10.63110141779303, 4498.2255859375],
    [35.83362832165123, 10.635102135583994, 4533.380859375],
    [35.86768208114539, 10.604729317793028, 1960.004638671875],
    [35.865655968217254, 10.568293758897548, 1960.0050048828125],
    [34.787267947377046, 10.779511293659716, 875.5390625],
    [34.741338531080494, 10.757140926144041, 5531.2216796875],
    [34.733139683166016, 10.763068545490048, 5241.33642578125],
    [34.73353204382809, 10.753497082618175, 5531.2216796875],
    [34.79894038303011, 10.742298189428949, 765.8050537109375],
    [35.77025508588869, 10.822141846068686, 1413.393798828125],
    [35.77355421964674, 10.832086281300468, 1413.3939208984375]
]

# Création de la carte centrée sur le premier point
m = folium.Map(location=[data[0][0], data[0][1]], zoom_start=10)

# Ajout des points sur la carte
for point in data:
    folium.CircleMarker(
        location=[point[0], point[1]],
        radius=5,
        color='blue',
        fill=True,
        fill_color='blue'
    ).add_to(m)

# Préparation des données pour la couche de densité
heat_data = [[point[0], point[1], point[2]] for point in data]

# Ajout de la couche de densité
heat_layer = HeatMap(heat_data, min_opacity=0.2, max_val=max(point[2] for point in data), radius=15, blur=10, gradient={0.2: 'cyan', 0.4: 'lime', 0.6: 'yellow', 0.8: 'orange', 1: 'red'})
heat_layer.add_to(folium.FeatureGroup(name='Heat Map').add_to(m))

# Ajout du contrôle des couches
folium.LayerControl().add_to(m)

# Sauvegarde de la carte
m.save('map.html')
